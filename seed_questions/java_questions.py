JAVA_QUESTIONS = [
    # --- Tricky Concept Questions ---
    {"question_text": "What is the output of the following code?\n\nString s1 = \"Hello\";\nString s2 = new String(\"Hello\");\nSystem.out.println(s1 == s2);\nSystem.out.println(s1.equals(s2));", "option_a": "true true", "option_b": "false true", "option_c": "true false", "option_d": "false false", "correct_option": "B"},
    {"question_text": "What is the output?\n\nint x = 5;\nSystem.out.println(x++ + ++x);", "option_a": "10", "option_b": "11", "option_c": "12", "option_d": "Compilation error", "correct_option": "C"},
    {"question_text": "What happens when you try to override a static method in Java?", "option_a": "It throws a compilation error", "option_b": "The method is hidden, not overridden (method hiding)", "option_c": "It works the same as regular method overriding", "option_d": "It creates a new static method in the child class only", "correct_option": "B"},
    {"question_text": "What is the output?\n\nInteger a = 127;\nInteger b = 127;\nInteger c = 128;\nInteger d = 128;\nSystem.out.println(a == b);\nSystem.out.println(c == d);", "option_a": "true true", "option_b": "false false", "option_c": "true false", "option_d": "false true", "correct_option": "C"},
    {"question_text": "Which of the following is NOT a valid functional interface in Java 8?", "option_a": "Predicate<T>", "option_b": "Function<T,R>", "option_c": "BiConsumer<T,U>", "option_d": "Collector<T,A,R>", "correct_option": "D"},
    {"question_text": "What is the output?\n\nfinal int[] arr = {1, 2, 3};\narr[0] = 10;\nSystem.out.println(arr[0]);", "option_a": "1", "option_b": "10", "option_c": "Compilation error because arr is final", "option_d": "Runtime exception", "correct_option": "B"},
    {"question_text": "What does the 'volatile' keyword guarantee in Java?", "option_a": "Thread-safety for compound operations like i++", "option_b": "Atomicity of read and write operations", "option_c": "Visibility of changes across threads, not atomicity", "option_d": "Mutual exclusion on the variable", "correct_option": "C"},
    {"question_text": "What is the output?\n\ntry {\n    System.out.println(\"try\");\n    return;\n} finally {\n    System.out.println(\"finally\");\n}", "option_a": "try", "option_b": "finally", "option_c": "try followed by finally", "option_d": "Compilation error", "correct_option": "C"},
    {"question_text": "In Java, which exception is thrown when you call wait() on an object without holding its monitor lock?", "option_a": "InterruptedException", "option_b": "IllegalStateException", "option_c": "IllegalMonitorStateException", "option_d": "ConcurrentModificationException", "correct_option": "C"},
    {"question_text": "What is the output?\n\nString s = null;\nswitch(s) {\n    case \"hello\": System.out.println(\"hello\"); break;\n    default: System.out.println(\"default\");\n}", "option_a": "hello", "option_b": "default", "option_c": "Compilation error", "option_d": "NullPointerException", "correct_option": "D"},
    # --- Coding Snippet Questions ---
    {"question_text": "What is the output?\n\nList<Integer> list = Arrays.asList(1, 2, 3, 4, 5);\nint sum = list.stream()\n    .filter(n -> n % 2 == 0)\n    .map(n -> n * n)\n    .reduce(0, Integer::sum);\nSystem.out.println(sum);", "option_a": "20", "option_b": "6", "option_c": "29", "option_d": "14", "correct_option": "A"},
    {"question_text": "What is the output?\n\nMap<String, Integer> map = new HashMap<>();\nmap.put(\"a\", 1);\nmap.put(\"b\", 2);\nmap.put(\"a\", 3);\nSystem.out.println(map.size() + \" \" + map.get(\"a\"));", "option_a": "3 3", "option_b": "2 3", "option_c": "2 1", "option_d": "3 1", "correct_option": "B"},
    {"question_text": "What is the output?\n\npublic class Test {\n    static int x = 10;\n    static { x += 5; }\n    public static void main(String[] args) {\n        System.out.println(x);\n    }\n    static { x *= 2; }\n}", "option_a": "10", "option_b": "15", "option_c": "30", "option_d": "25", "correct_option": "C"},
    {"question_text": "What is the output?\n\nStringBuilder sb = new StringBuilder(\"Hello\");\nsb.insert(2, \"XY\");\nSystem.out.println(sb);", "option_a": "HeXYllo", "option_b": "HXYello", "option_c": "HelXYlo", "option_d": "HeXYllo", "correct_option": "A"},
    {"question_text": "What does this code print?\n\nOptional<String> opt = Optional.of(\"Hello\");\nopt.ifPresent(System.out::println);\nOptional<String> empty = Optional.empty();\nSystem.out.println(empty.orElse(\"World\"));", "option_a": "Hello\\nWorld", "option_b": "Hello\\nnull", "option_c": "null\\nWorld", "option_d": "Hello\\nNoSuchElementException", "correct_option": "A"},
    {"question_text": "What is the output?\n\nint[] a = {1, 2, 3};\nint[] b = a;\nb[0] = 99;\nSystem.out.println(a[0]);", "option_a": "1", "option_b": "99", "option_c": "Compilation error", "option_d": "ArrayIndexOutOfBoundsException", "correct_option": "B"},
    {"question_text": "What is the output?\n\nList<String> list = new ArrayList<>(Arrays.asList(\"a\", \"b\", \"c\"));\nIterator<String> it = list.iterator();\nwhile(it.hasNext()) {\n    String s = it.next();\n    if(s.equals(\"b\")) list.remove(s);\n}\nSystem.out.println(list);", "option_a": "[a, c]", "option_b": "[a, b, c]", "option_c": "ConcurrentModificationException", "option_d": "Compilation error", "correct_option": "C"},
    {"question_text": "What is the output?\n\ninterface A { default void show() { System.out.println(\"A\"); } }\ninterface B { default void show() { System.out.println(\"B\"); } }\nclass C implements A, B {\n    public void show() { A.super.show(); }\n}\nnew C().show();", "option_a": "Compilation error", "option_b": "A", "option_c": "B", "option_d": "Runtime error", "correct_option": "B"},
    # --- Scenario-Based Questions ---
    {"question_text": "In a microservices architecture, your Java service needs to handle 10,000 concurrent requests. Which approach is MOST appropriate?", "option_a": "Use Thread.sleep() in each request handler", "option_b": "Create a new thread per request using new Thread()", "option_c": "Use CompletableFuture with a fixed thread pool or Virtual Threads (Java 21)", "option_d": "Use synchronized blocks on all methods", "correct_option": "C"},
    {"question_text": "You have a HashMap that is accessed by multiple threads. Some threads read, some write. What is the BEST solution for high-performance concurrent access?", "option_a": "Wrap HashMap with Collections.synchronizedMap()", "option_b": "Use ConcurrentHashMap", "option_c": "Use Hashtable", "option_d": "Synchronize all access with a single lock object", "correct_option": "B"},
    {"question_text": "Your application suffers from 'stop-the-world' GC pauses lasting >500ms. The heap is 8GB. Which GC would you switch to first?", "option_a": "Serial GC", "option_b": "Parallel GC", "option_c": "G1 GC or ZGC", "option_d": "CMS (Concurrent Mark Sweep)", "correct_option": "C"},
    {"question_text": "You notice memory usage constantly increasing in your Spring Boot app. Which tool/command would you use FIRST to diagnose a potential memory leak?", "option_a": "jstack", "option_b": "jmap -heap and then analyze the heap dump with Eclipse MAT", "option_c": "javac -verbose", "option_d": "java -XX:+PrintFlagsFinal", "correct_option": "B"},
    {"question_text": "In a Spring Boot REST API, you need to validate that a request body field 'email' contains a valid email and 'age' is between 18-100. What is the BEST approach?", "option_a": "Write if-else checks in the controller method", "option_b": "Use Bean Validation annotations (@Email, @Min, @Max) with @Valid", "option_c": "Use a Filter to validate all incoming requests", "option_d": "Create a custom interceptor", "correct_option": "B"},
    {"question_text": "What is the output?\n\ndouble d1 = 0.1 + 0.2;\nSystem.out.println(d1 == 0.3);\nSystem.out.println(d1);", "option_a": "true 0.3", "option_b": "false 0.30000000000000004", "option_c": "true 0.30000000000000004", "option_d": "Compilation error", "correct_option": "B"},
    {"question_text": "What is the output?\n\nenum Color { RED, GREEN, BLUE }\nColor c = Color.RED;\nswitch(c) {\n    case RED: System.out.print(\"R \");\n    case GREEN: System.out.print(\"G \");\n    case BLUE: System.out.print(\"B \");\n}", "option_a": "R", "option_b": "R G", "option_c": "R G B", "option_d": "Compilation error", "correct_option": "C"},
    {"question_text": "Which statement about Java records (Java 16+) is FALSE?", "option_a": "Records automatically generate equals(), hashCode(), and toString()", "option_b": "Record fields are implicitly final", "option_c": "Records can extend other classes", "option_d": "Records can implement interfaces", "correct_option": "C"},
    {"question_text": "What is the output?\n\nString s1 = \"abc\";\nString s2 = \"abc\";\nString s3 = new String(\"abc\").intern();\nSystem.out.println(s1 == s2);\nSystem.out.println(s1 == s3);", "option_a": "true false", "option_b": "true true", "option_c": "false true", "option_d": "false false", "correct_option": "B"},
    {"question_text": "What is the output?\n\nObject obj = new int[]{1, 2, 3};\nSystem.out.println(obj instanceof int[]);\nSystem.out.println(obj instanceof Object);", "option_a": "true true", "option_b": "true false", "option_c": "false true", "option_d": "Compilation error", "correct_option": "A"},
    {"question_text": "What happens when a checked exception is thrown inside a lambda used with Stream.forEach()?", "option_a": "It is automatically caught and ignored", "option_b": "It must be caught inside the lambda or wrapped in an unchecked exception", "option_c": "The stream handles it with a default exception handler", "option_d": "It propagates normally like in regular methods", "correct_option": "B"},
    {"question_text": "What is the output?\n\nclass Parent {\n    int x = 10;\n    int getX() { return x; }\n}\nclass Child extends Parent {\n    int x = 20;\n    int getX() { return x; }\n}\nParent p = new Child();\nSystem.out.println(p.x + \" \" + p.getX());", "option_a": "10 10", "option_b": "20 20", "option_c": "10 20", "option_d": "20 10", "correct_option": "C"},
    {"question_text": "In Java, what is the difference between Callable and Runnable?", "option_a": "Callable can return a result and throw checked exceptions; Runnable cannot", "option_b": "Runnable can return a result; Callable cannot", "option_c": "They are identical in functionality", "option_d": "Callable runs on the main thread only", "correct_option": "A"},
    {"question_text": "What is the output?\n\nList<Integer> list = List.of(1, 2, 3);\nlist.add(4);\nSystem.out.println(list);", "option_a": "[1, 2, 3, 4]", "option_b": "UnsupportedOperationException", "option_c": "Compilation error", "option_d": "[1, 2, 3]", "correct_option": "B"},
    {"question_text": "What is the purpose of the 'transient' keyword in Java?", "option_a": "Makes a field thread-safe", "option_b": "Excludes a field from serialization", "option_c": "Makes a field immutable", "option_d": "Restricts access to the same package", "correct_option": "B"},
    {"question_text": "What is the output?\n\nSystem.out.println(1 + 2 + \"3\");\nSystem.out.println(\"1\" + 2 + 3);", "option_a": "33 and 123", "option_b": "33 and 6", "option_c": "6 and 123", "option_d": "6 and 6", "correct_option": "A"},
    {"question_text": "Which design pattern does java.util.Collections.unmodifiableList() implement?", "option_a": "Proxy Pattern", "option_b": "Decorator Pattern", "option_c": "Adapter Pattern", "option_d": "Factory Pattern", "correct_option": "B"},
    {"question_text": "What is the output?\n\ntry {\n    int result = 10 / 0;\n} catch (ArithmeticException | NullPointerException e) {\n    System.out.println(e.getClass().getSimpleName());\n}", "option_a": "ArithmeticException", "option_b": "NullPointerException", "option_c": "Exception", "option_d": "Compilation error", "correct_option": "A"},
    {"question_text": "In Spring Boot, what is the default scope of a bean?", "option_a": "Prototype", "option_b": "Singleton", "option_c": "Request", "option_d": "Session", "correct_option": "B"},
    {"question_text": "What is the output?\n\nStream.of(1, 2, 3, 4, 5)\n    .peek(System.out::print)\n    .filter(n -> n > 3)\n    .count();", "option_a": "12345", "option_b": "45", "option_c": "12345 (prints all then filters)", "option_d": "Nothing is printed", "correct_option": "A"},
    {"question_text": "What is the time complexity of ConcurrentHashMap's get() operation?", "option_a": "O(n)", "option_b": "O(log n)", "option_c": "O(1) amortized", "option_d": "O(n log n)", "correct_option": "C"},
    {"question_text": "What is the output?\n\nclass A {\n    void show() throws Exception { System.out.println(\"A\"); }\n}\nclass B extends A {\n    void show() { System.out.println(\"B\"); }\n}\nnew B().show();", "option_a": "A", "option_b": "B", "option_c": "Compilation error", "option_d": "Runtime error", "correct_option": "B"},
    {"question_text": "What is the output?\n\nint x = 0;\nfor(int i = 0; i < 5; i++) {\n    x = x++;\n}\nSystem.out.println(x);", "option_a": "5", "option_b": "4", "option_c": "0", "option_d": "1", "correct_option": "C"},
    {"question_text": "Which of the following creates an immutable list in Java 9+?", "option_a": "new ArrayList<>(Arrays.asList(1,2,3))", "option_b": "Collections.unmodifiableList(new ArrayList<>())", "option_c": "List.of(1, 2, 3)", "option_d": "Arrays.asList(1, 2, 3)", "correct_option": "C"},
    {"question_text": "What is the output?\n\nCompletableFuture<String> future = CompletableFuture.supplyAsync(() -> \"Hello\")\n    .thenApply(s -> s + \" World\")\n    .thenApply(String::toUpperCase);\nSystem.out.println(future.get());", "option_a": "Hello", "option_b": "Hello World", "option_c": "HELLO WORLD", "option_d": "CompletableFuture object reference", "correct_option": "C"},
    {"question_text": "In JPA/Hibernate, what is the N+1 problem and how do you solve it?", "option_a": "It's a database normalization issue; solved by denormalization", "option_b": "It's when fetching N entities causes N+1 queries; solved by JOIN FETCH or @EntityGraph", "option_c": "It's a connection pool exhaustion issue; solved by increasing pool size", "option_d": "It's a thread safety issue; solved by synchronization", "correct_option": "B"},
    {"question_text": "What is the output?\n\nvar list = new ArrayList<>();\nlist.add(\"hello\");\nlist.add(42);\nSystem.out.println(list.size());", "option_a": "Compilation error - type mismatch", "option_b": "Compilation error - var cannot be used", "option_c": "2", "option_d": "ClassCastException", "correct_option": "C"},
    {"question_text": "Which statement about Java's garbage collection is TRUE?", "option_a": "You can force GC by calling System.gc()", "option_b": "System.gc() is only a suggestion to the JVM, not a guarantee", "option_c": "Objects with finalize() are never garbage collected", "option_d": "WeakReferences prevent garbage collection", "correct_option": "B"},
    {"question_text": "What is the output?\n\nclass Outer {\n    int x = 10;\n    class Inner {\n        int x = 20;\n        void show() {\n            int x = 30;\n            System.out.println(x + \" \" + this.x + \" \" + Outer.this.x);\n        }\n    }\n}\nnew Outer().new Inner().show();", "option_a": "10 20 30", "option_b": "30 20 10", "option_c": "30 30 30", "option_d": "Compilation error", "correct_option": "B"},
    {"question_text": "In a Spring Boot application, what annotation would you use to create a scheduled task that runs every 5 minutes?", "option_a": "@Timer(\"5m\")", "option_b": "@Scheduled(fixedRate = 300000)", "option_c": "@Cron(\"*/5 * * * *\")", "option_d": "@Interval(minutes = 5)", "correct_option": "B"},
    {"question_text": "What is the output?\n\nSet<Integer> set = new TreeSet<>(Comparator.reverseOrder());\nset.add(3); set.add(1); set.add(2);\nSystem.out.println(set);", "option_a": "[1, 2, 3]", "option_b": "[3, 2, 1]", "option_c": "[3, 1, 2]", "option_d": "Compilation error", "correct_option": "B"},
    {"question_text": "What is the output?\n\nObject o = \"Hello\";\nif (o instanceof String s && s.length() > 3) {\n    System.out.println(s.toUpperCase());\n}", "option_a": "HELLO", "option_b": "Hello", "option_c": "Compilation error - pattern matching not supported", "option_d": "Compilation error - s is not declared", "correct_option": "A"},
    {"question_text": "Which SOLID principle states that a class should depend on abstractions, not concretions?", "option_a": "Single Responsibility Principle", "option_b": "Open/Closed Principle", "option_c": "Liskov Substitution Principle", "option_d": "Dependency Inversion Principle", "correct_option": "D"},
]
