{% extends "layout.html" %}
{% block title %}Admin Dashboard{% endblock %}
{% block content %}

<div class="mb-10 animate-dynamic">
    <h1 class="text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-400 mb-2">
        Admin Dashboard
    </h1>
    <p class="text-gray-400 text-lg">Overview of system activity, user management, and financials.</p>
</div>

<div class="mb-8 animate-dynamic" style="animation-delay: 0.1s;">
    <div class="border-b border-gray-700/50">
        <nav id="dashboard-tabs" class="-mb-px flex space-x-4 overflow-x-auto pb-1" aria-label="Tabs">
            <a href="#" class="tab-link group flex items-center px-4 py-3 text-sm font-medium rounded-t-lg border-b-2 border-indigo-500 text-indigo-400 bg-white/5" data-tab="users">
                <i class="fas fa-users mr-2 group-hover:text-indigo-300"></i> Users & Activity
            </a>
            <a href="#" class="tab-link group flex items-center px-4 py-3 text-sm font-medium rounded-t-lg border-b-2 border-transparent text-gray-400 hover:text-gray-200 hover:border-gray-500 transition-all" data-tab="recruitment">
                <i class="fas fa-briefcase mr-2 group-hover:text-gray-200"></i> Recruitment
            </a>
            <a href="#" class="tab-link group flex items-center px-4 py-3 text-sm font-medium rounded-t-lg border-b-2 border-transparent text-gray-400 hover:text-gray-200 hover:border-gray-500 transition-all" data-tab="communication">
                <i class="fas fa-envelope mr-2 group-hover:text-gray-200"></i> Communication
            </a>
            <a href="#" class="tab-link group flex items-center px-4 py-3 text-sm font-medium rounded-t-lg border-b-2 border-transparent text-gray-400 hover:text-gray-200 hover:border-gray-500 transition-all" data-tab="content">
                <i class="fas fa-file-alt mr-2 group-hover:text-gray-200"></i> Content & Records
            </a>
            <a href="#" class="tab-link group flex items-center px-4 py-3 text-sm font-medium rounded-t-lg border-b-2 border-transparent text-gray-400 hover:text-gray-200 hover:border-gray-500 transition-all" data-tab="finance">
                <i class="fas fa-wallet mr-2 group-hover:text-gray-200"></i> Finance
            </a>
        </nav>
    </div>
</div>

<div id="dashboard-content" class="min-h-[60vh]">
    
    <div id="users-tab" class="tab-content grid grid-cols-1 lg:grid-cols-3 gap-8 animate-dynamic">
        <div class="lg:col-span-2 space-y-8">
            
            <div class="bg-white/5 dark:bg-gray-800/40 rounded-xl shadow-lg border border-white/10 backdrop-blur-md overflow-hidden">
                <div class="p-6 border-b border-white/5 flex justify-between items-center">
                    <h2 class="text-xl font-bold text-white flex items-center"><i class="fas fa-user-check text-yellow-400 mr-3"></i> Pending Approvals</h2>
                    {% if pending_users %}
                        <span class="bg-yellow-500/20 text-yellow-300 text-xs font-bold px-2 py-1 rounded-full">{{ pending_users|length }} Pending</span>
                    {% endif %}
                </div>
                <div class="p-6">
                    {% if pending_users %}
                        <ul class="divide-y divide-white/5">
                            {% for user in pending_users %}
                                <li class="py-4 flex flex-col sm:flex-row sm:items-center justify-between gap-4 hover:bg-white/5 rounded-lg px-2 transition-colors">
                                    <div class="flex items-center">
                                        <img src="{{ user.avatar_url }}" alt="Avatar" class="rounded-full w-12 h-12 border-2 border-gray-600 mr-4">
                                        <div>
                                            <p class="font-bold text-white text-lg">{{ user.username }}</p>
                                            <div class="flex items-center text-sm text-gray-400 space-x-3">
                                                <span><i class="fas fa-envelope mr-1"></i> {{ user.email }}</span>
                                                <span class="px-2 py-0.5 rounded bg-gray-700 text-xs uppercase tracking-wide">{{ user.role }}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="flex space-x-3">
                                        <a href="{{ url_for('approve_user', user_id=user.id) }}" class="px-4 py-2 bg-green-600 hover:bg-green-500 text-white text-sm font-semibold rounded-lg shadow transition-all transform hover:scale-105">
                                            <i class="fas fa-check mr-1"></i> Approve
                                        </a>
                                        <a href="{{ url_for('reject_user', user_id=user.id) }}" class="px-4 py-2 bg-red-600 hover:bg-red-500 text-white text-sm font-semibold rounded-lg shadow transition-all transform hover:scale-105" onclick="return confirm('Reject and delete this registration?');">
                                            <i class="fas fa-times mr-1"></i> Reject
                                        </a>
                                    </div>
                                </li>
                            {% endfor %}
                        </ul>
                    {% else %}
                        <div class="text-center py-8 text-gray-500">
                            <i class="fas fa-check-circle text-4xl mb-3 opacity-50"></i>
                            <p>No pending user approvals.</p>
                        </div>
                    {% endif %}
                </div>
            </div>

            <div class="bg-white/5 dark:bg-gray-800/40 rounded-xl shadow-lg border border-white/10 backdrop-blur-md">
                <div class="p-6 border-b border-white/5">
                    <h2 class="text-xl font-bold text-white flex items-center"><i class="fas fa-address-book text-blue-400 mr-3"></i> Link Contacts</h2>
                </div>
                <div class="p-6">
                    <form action="{{ url_for('add_contact_for_candidate') }}" method="POST" class="flex flex-col md:flex-row gap-4">
                        <div class="flex-1">
                            <label class="block text-xs font-medium text-gray-400 uppercase mb-1">Candidate</label>
                            <select name="candidate_id" required class="w-full px-4 py-2.5 rounded-lg bg-gray-900/50 border border-gray-600 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="">Select Candidate...</option>
                                {% for candidate in candidates %}
                                    <option value="{{ candidate.id }}">{{ candidate.username }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="flex-1">
                            <label class="block text-xs font-medium text-gray-400 uppercase mb-1">Developer</label>
                            <select name="developer_id" required class="w-full px-4 py-2.5 rounded-lg bg-gray-900/50 border border-gray-600 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="">Select Developer...</option>
                                {% for dev in developers %}
                                    <option value="{{ dev.id }}">{{ dev.username }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="flex items-end">
                            <button type="submit" class="w-full md:w-auto px-6 py-2.5 rounded-lg text-white bg-blue-600 hover:bg-blue-500 font-medium shadow-lg shadow-blue-500/30 transition-all">
                                <i class="fas fa-link mr-2"></i> Link
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <div class="bg-white/5 dark:bg-gray-800/40 rounded-xl shadow-lg border border-white/10 backdrop-blur-md flex flex-col h-full">
            <div class="p-6 border-b border-white/5">
                <h2 class="text-xl font-bold text-white flex items-center"><i class="fas fa-stream text-purple-400 mr-3"></i> Activity Feed</h2>
            </div>
            <div class="p-4 overflow-y-auto max-h-[80vh] custom-scrollbar flex-1">
                <ul class="space-y-6 relative border-l border-gray-700 ml-3 pl-6">
                    {% for activity in activities %}
                    <li class="relative">
                        <span class="absolute -left-[2.4rem] flex h-8 w-8 items-center justify-center rounded-full bg-gray-800 border-2 border-gray-600">
                            <img src="{{ activity.author.avatar_url }}" alt="" class="h-full w-full rounded-full">
                        </span>
                        <div>
                            <div class="flex items-center justify-between mb-1">
                                <p class="text-sm font-bold text-white">{{ activity.author.username }}</p>
                                <span class="text-xs text-gray-500">{{ activity.timestamp.strftime('%b %d, %H:%M') }}</span>
                            </div>
                            <div class="bg-gray-900/50 p-3 rounded-lg border border-white/5">
                                <p class="text-sm text-gray-300">{{ activity.content }}</p>
                            </div>
                        </div>
                    </li>
                    {% else %}
                        <li class="text-gray-500 italic text-center py-4">No recent activity.</li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>

    <div id="recruitment-tab" class="tab-content hidden grid grid-cols-1 lg:grid-cols-2 gap-8 animate-dynamic">
        
        <div class="space-y-8">
            <div class="bg-white/5 dark:bg-gray-800/40 rounded-xl shadow-lg border border-white/10 backdrop-blur-md">
                <div class="p-6 border-b border-white/5 flex justify-between items-center">
                    <h2 class="text-xl font-bold text-white flex items-center"><i class="fas fa-file-contract text-green-400 mr-3"></i> Job Applications</h2>
                </div>
                <div class="p-2 overflow-y-auto max-h-96 custom-scrollbar">
                    {% if applications %}
                        <div class="space-y-2">
                            {% for app in applications %}
                                <div class="p-4 bg-white/5 hover:bg-white/10 rounded-lg transition-colors border border-white/5 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">
                                   <div>
                                        <p class="font-bold text-white text-lg">{{ app.job.title }}</p>
                                        <p class="text-sm text-gray-400"><i class="fas fa-user mr-2"></i> {{ app.candidate.username }}</p>
                                        <p class="text-xs text-gray-500 mt-1">{{ app.applied_at.strftime('%b %d, %Y') }}</p>
                                   </div>
                                   
                                   {% if app.status == 'pending' %}
                                        <div class="flex space-x-2">
                                            <a href="{{ url_for('accept_application', app_id=app.id) }}" class="px-3 py-1.5 bg-green-600 hover:bg-green-500 text-white text-xs font-bold rounded shadow transition-transform hover:-translate-y-0.5">Accept</a>
                                            <a href="{{ url_for('reject_application', app_id=app.id) }}" class="px-3 py-1.5 bg-red-600 hover:bg-red-500 text-white text-xs font-bold rounded shadow transition-transform hover:-translate-y-0.5">Reject</a>
                                        </div>
                                    {% else %}
                                         <span class="px-3 py-1 text-xs font-bold uppercase tracking-wider rounded-full {% if app.status == 'accepted' %}bg-green-500/20 text-green-400 border border-green-500/50{% else %}bg-red-500/20 text-red-400 border border-red-500/50{% endif %}">
                                            {{ app.status }}
                                         </span>
                                    {% endif %}
                                </div>
                            {% endfor %}
                        </div>
                    {% else %}
                        <div class="text-center py-10 text-gray-500">
                            <p>No new job applications.</p>
                        </div>
                    {% endif %}
                </div>
            </div>

            <div class="bg-white/5 dark:bg-gray-800/40 rounded-xl shadow-lg border border-white/10 backdrop-blur-md">
                <div class="p-6 border-b border-white/5">
                    <h2 class="text-xl font-bold text-white flex items-center"><i class="fas fa-user-shield text-indigo-400 mr-3"></i> Assign Moderator</h2>
                </div>
                <div class="p-6">
                    {% if scheduled_candidates %}
                    <form action="{{ url_for('assign_moderator') }}" method="POST" class="space-y-4">
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-xs font-medium text-gray-400 uppercase mb-1">Candidate (Scheduled)</label>
                                <select name="candidate_id" required class="w-full px-3 py-2 rounded-lg bg-gray-900/50 border border-gray-600 text-white focus:ring-2 focus:ring-indigo-500">
                                    <option value="">Select Candidate</option>
                                    {% for candidate in scheduled_candidates %}
                                        <option value="{{ candidate.id }}">{{ candidate.username }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div>
                                <label class="block text-xs font-medium text-gray-400 uppercase mb-1">Moderator</label>
                                <select name="moderator_id" required class="w-full px-3 py-2 rounded-lg bg-gray-900/50 border border-gray-600 text-white focus:ring-2 focus:ring-indigo-500">
                                    <option value="">Select Moderator</option>
                                    {% for moderator in moderators %}
                                        <option value="{{ moderator.id }}">{{ moderator.username }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>
                        <button type="submit" class="w-full py-2 px-4 rounded-lg text-white bg-indigo-600 hover:bg-indigo-500 font-medium shadow-lg shadow-indigo-500/30 transition-all">
                            Assign & Notify
                        </button>
                    </form>
                    {% else %}
                    <div class="text-center text-gray-400 p-4 bg-gray-900/30 rounded-lg border border-gray-700 border-dashed">
                        <p class="text-sm">No candidates currently require a moderator.</p>
                        <a href="{{ url_for('events') }}" class="text-indigo-400 text-xs hover:underline mt-1 inline-block">Schedule a test first &rarr;</a>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <div class="space-y-8">
            <div class="bg-white/5 dark:bg-gray-800/40 rounded-xl shadow-lg border border-white/10 backdrop-blur-md">
                <div class="p-6 border-b border-white/5">
                    <h2 class="text-xl font-bold text-white flex items-center"><i class="fas fa-plus-circle text-blue-400 mr-3"></i> Post New Job</h2>
                </div>
                <div class="p-6">
                    <form action="{{ url_for('post_job') }}" method="POST" class="space-y-4">
                        <div>
                            <label class="block text-xs font-medium text-gray-400 uppercase mb-1">Job Title</label>
                            <input type="text" name="job_title" required class="w-full px-3 py-2 rounded-lg bg-gray-900/50 border border-gray-600 text-white placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="e.g. Senior Java Developer">
                        </div>
                        <div>
                            <label class="block text-xs font-medium text-gray-400 uppercase mb-1">Description</label>
                            <textarea name="job_description" rows="4" required class="w-full px-3 py-2 rounded-lg bg-gray-900/50 border border-gray-600 text-white placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea>
                        </div>
                        <button type="submit" class="w-full py-2 px-4 rounded-lg text-white bg-blue-600 hover:bg-blue-500 font-medium shadow-lg shadow-blue-500/30 transition-all">
                            Publish Job Opening
                        </button>
                    </form>
                </div>
            </div>

            <div class="bg-white/5 dark:bg-gray-800/40 rounded-xl shadow-lg border border-white/10 backdrop-blur-md">
                <div class="p-6 border-b border-white/5">
                    <h2 class="text-xl font-bold text-white flex items-center"><i class="fas fa-chalkboard-teacher text-orange-400 mr-3"></i> Active Assignments</h2>
                </div>
                <div class="p-4 overflow-y-auto max-h-48 custom-scrollbar">
                    {% if assigned_candidates_with_moderators %}
                        <ul class="space-y-2">
                            {% for candidate in assigned_candidates_with_moderators %}
                                {% set moderator = moderators_map.get(candidate.moderator_id) %}
                                {% if moderator %}
                                    <li class="p-3 bg-white/5 rounded-lg flex items-center justify-between border border-white/5">
                                       <div class="flex items-center">
                                            <div class="h-8 w-8 rounded-full bg-gray-700 flex items-center justify-center mr-3 text-xs font-bold text-gray-300">C</div>
                                            <p class="font-semibold text-white text-sm">{{ candidate.username }}</p>
                                       </div>
                                       <div class="text-gray-400 text-sm">
                                            <i class="fas fa-arrow-right mx-2 text-gray-600"></i>
                                            <span class="text-indigo-300">{{ moderator.username }}</span>
                                       </div>
                                    </li>
                                {% endif %}
                            {% endfor %}
                        </ul>
                    {% else %}
                        <p class="text-gray-500 text-center italic text-sm">No active moderator assignments.</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <div id="communication-tab" class="tab-content hidden grid grid-cols-1 md:grid-cols-2 gap-8 animate-dynamic">
        <div class="bg-gradient-to-br from-orange-900/40 to-gray-800/40 rounded-xl shadow-lg border border-orange-500/20 p-8 text-center hover:border-orange-500/40 transition-all group">
            <div class="h-16 w-16 bg-orange-500/20 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform">
                <i class="fas fa-bullhorn text-3xl text-orange-400"></i>
            </div>
            <h2 class="text-2xl font-bold text-white mb-3">Broadcast to All</h2>
            <p class="text-gray-400 mb-8">Send system-wide announcements, maintenance updates, or newsletters to every registered user.</p>
            <a href="{{ url_for('broadcast_email') }}" class="inline-block w-full py-3 px-6 rounded-lg text-white bg-orange-600 hover:bg-orange-500 font-bold shadow-lg shadow-orange-600/20 transition-all">
                Compose Broadcast
            </a>
        </div>

        <div class="bg-gradient-to-br from-cyan-900/40 to-gray-800/40 rounded-xl shadow-lg border border-cyan-500/20 p-8 text-center hover:border-cyan-500/40 transition-all group">
            <div class="h-16 w-16 bg-cyan-500/20 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform">
                <i class="fas fa-paper-plane text-3xl text-cyan-400"></i>
            </div>
            <h2 class="text-2xl font-bold text-white mb-3">Targeted Email</h2>
            <p class="text-gray-400 mb-8">Select specific users or groups to send personalized updates, reminders, or private information.</p>
            <a href="{{ url_for('send_specific_email') }}" class="inline-block w-full py-3 px-6 rounded-lg text-white bg-cyan-600 hover:bg-cyan-500 font-bold shadow-lg shadow-cyan-600/20 transition-all">
                Select Recipients
            </a>
        </div>
    </div>

    <div id="content-tab" class="tab-content hidden grid grid-cols-1 md:grid-cols-2 gap-8 animate-dynamic">
        <a href="{{ url_for('manage_ads') }}" class="group bg-white/5 dark:bg-gray-800/40 p-8 rounded-xl border border-white/10 hover:bg-white/10 transition-all flex items-center">
            <div class="h-14 w-14 bg-indigo-500/20 rounded-lg flex items-center justify-center mr-6 group-hover:bg-indigo-500/30 transition-colors">
                <i class="fas fa-ad text-2xl text-indigo-400"></i>
            </div>
            <div>
                <h3 class="text-xl font-bold text-white mb-1">Manage Affiliate Ads</h3>
                <p class="text-gray-400 text-sm">Update promotional content visible on the offers page.</p>
            </div>
            <i class="fas fa-chevron-right ml-auto text-gray-600 group-hover:text-white transition-colors"></i>
        </a>

        <a href="{{ url_for('manage_records') }}" class="group bg-white/5 dark:bg-gray-800/40 p-8 rounded-xl border border-white/10 hover:bg-white/10 transition-all flex items-center">
            <div class="h-14 w-14 bg-purple-500/20 rounded-lg flex items-center justify-center mr-6 group-hover:bg-purple-500/30 transition-colors">
                <i class="fas fa-history text-2xl text-purple-400"></i>
            </div>
            <div>
                <h3 class="text-xl font-bold text-white mb-1">Manage Records</h3>
                <p class="text-gray-400 text-sm">View history, delete old logs, feedback, and submissions.</p>
            </div>
            <i class="fas fa-chevron-right ml-auto text-gray-600 group-hover:text-white transition-colors"></i>
        </a>
        
        <a href="{{ url_for('projects') }}" class="col-span-1 md:col-span-2 group bg-white/5 dark:bg-gray-800/40 p-8 rounded-xl border border-white/10 hover:bg-white/10 transition-all flex items-center">
            <div class="h-14 w-14 bg-emerald-500/20 rounded-lg flex items-center justify-center mr-6 group-hover:bg-emerald-500/30 transition-colors">
                <i class="fas fa-project-diagram text-2xl text-emerald-400"></i>
            </div>
            <div>
                <h3 class="text-xl font-bold text-white mb-1">Project Management Hub</h3>
                <p class="text-gray-400 text-sm">Create projects, track budgets, generate BRDs, and manage transactions.</p>
            </div>
            <i class="fas fa-chevron-right ml-auto text-gray-600 group-hover:text-white transition-colors"></i>
        </a>
    </div>

    <div id="finance-tab" class="tab-content hidden grid grid-cols-1 md:grid-cols-3 gap-6 animate-dynamic">
        <div class="bg-white/5 dark:bg-gray-800/40 rounded-xl p-6 border border-white/10 shadow-lg hover:border-purple-500/30 transition-all group">
            <div class="flex justify-between items-start mb-4">
                <div class="p-3 bg-purple-500/10 rounded-lg group-hover:bg-purple-500/20 transition-colors">
                    <i class="fas fa-boxes text-2xl text-purple-400"></i>
                </div>
                <a href="{{ url_for('manage_inventory') }}" class="text-sm text-purple-400 font-medium hover:underline">Manage &rarr;</a>
            </div>
            <h3 class="text-lg font-bold text-white mb-2">Product Inventory</h3>
            <p class="text-sm text-gray-400">Track stock levels, manage product codes, and update pricing.</p>
        </div>

        <div class="bg-white/5 dark:bg-gray-800/40 rounded-xl p-6 border border-white/10 shadow-lg hover:border-green-500/30 transition-all group">
            <div class="flex justify-between items-start mb-4">
                <div class="p-3 bg-green-500/10 rounded-lg group-hover:bg-green-500/20 transition-colors">
                    <i class="fas fa-file-invoice-dollar text-2xl text-green-400"></i>
                </div>
                <a href="{{ url_for('create_invoice') }}" class="text-sm text-green-400 font-medium hover:underline">Create &rarr;</a>
            </div>
            <h3 class="text-lg font-bold text-white mb-2">Create Invoice</h3>
            <p class="text-sm text-gray-400">Generate professional PDF invoices and email them instantly.</p>
        </div>

        <div class="bg-white/5 dark:bg-gray-800/40 rounded-xl p-6 border border-white/10 shadow-lg hover:border-blue-500/30 transition-all group">
            <div class="flex justify-between items-start mb-4">
                <div class="p-3 bg-blue-500/10 rounded-lg group-hover:bg-blue-500/20 transition-colors">
                    <i class="fas fa-list-alt text-2xl text-blue-400"></i>
                </div>
                <a href="{{ url_for('manage_invoices') }}" class="text-sm text-blue-400 font-medium hover:underline">View All &rarr;</a>
            </div>
            <h3 class="text-lg font-bold text-white mb-2">Invoice History</h3>
            <p class="text-sm text-gray-400">Track sent invoices, resend copies, and send payment reminders.</p>
        </div>
    </div>

</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const tabs = document.querySelectorAll('.tab-link');
        const tabContents = document.querySelectorAll('.tab-content');
        
        // CSS classes for active vs inactive tabs
        const activeClasses = ['border-indigo-500', 'text-indigo-400', 'bg-white/5'];
        const inactiveClasses = ['border-transparent', 'text-gray-400', 'hover:text-gray-200', 'hover:border-gray-500'];

        tabs.forEach(tab => {
            tab.addEventListener('click', (e) => {
                e.preventDefault();

                // Reset all tabs
                tabs.forEach(t => {
                    t.classList.remove(...activeClasses);
                    t.classList.add(...inactiveClasses);
                });

                // Activate current tab
                tab.classList.remove(...inactiveClasses);
                tab.classList.add(...activeClasses);

                // Show corresponding content
                const targetId = tab.getAttribute('data-tab') + '-tab';
                tabContents.forEach(content => {
                    if (content.id === targetId) {
                        content.classList.remove('hidden');
                        // Re-trigger animation
                        content.classList.remove('animate-dynamic');
                        void content.offsetWidth; // force reflow
                        content.classList.add('animate-dynamic');
                    } else {
                        content.classList.add('hidden');
                    }
                });
            });
        });
    });
</script>

<style>
    /* Custom Scrollbar for lists */
    .custom-scrollbar::-webkit-scrollbar {
        width: 6px;
    }
    .custom-scrollbar::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.05); 
        border-radius: 4px;
    }
    .custom-scrollbar::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.2); 
        border-radius: 4px;
    }
    .custom-scrollbar::-webkit-scrollbar-thumb:hover {
        background: rgba(255, 255, 255, 0.3); 
    }
</style>
{% endblock %}