{% extends "layout.html" %}
{% block title %}Access Portal{% endblock %}
{% block content %}
<div class="min-h-[85vh] flex items-center justify-center px-4">
    <div class="w-full max-w-md animate-dynamic">
        <div class="bg-white/5 dark:bg-gray-900/60 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/10 overflow-hidden relative transition-all duration-300 hover:border-white/20 hover:shadow-indigo-500/10">
            
            <div class="flex border-b border-white/10">
                <button id="tab-login" class="flex-1 py-4 text-center text-sm font-bold uppercase tracking-wider text-white bg-white/5 transition-all relative group" onclick="switchTab('login')">
                    <span class="group-hover:text-indigo-300 transition-colors">Sign In</span>
                    <div class="absolute bottom-0 left-0 w-full h-0.5 bg-indigo-500 transition-transform duration-300 transform scale-x-100 origin-left" id="indicator-login"></div>
                </button>
                <button id="tab-register" class="flex-1 py-4 text-center text-sm font-bold uppercase tracking-wider text-gray-400 hover:text-white hover:bg-white/5 transition-all relative group" onclick="switchTab('register')">
                    <span class="group-hover:text-purple-300 transition-colors">Create Account</span>
                    <div class="absolute bottom-0 left-0 w-full h-0.5 bg-purple-500 transition-transform duration-300 transform scale-x-0 origin-right" id="indicator-register"></div>
                </button>
            </div>

            <div id="view-login" class="p-8 transition-all duration-500 ease-in-out opacity-100 translate-x-0">
                <div class="text-center mb-8">
                    <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-indigo-500/10 mb-4 text-indigo-400">
                        <i class="fas fa-user-circle text-3xl"></i>
                    </div>
                    <h2 class="text-2xl font-bold text-white">Welcome Back</h2>
                    <p class="text-sm text-gray-400 mt-2">Access your dashboard and manage your projects.</p>
                </div>

                <form method="POST" action="{{ url_for('login_register') }}" class="space-y-6">
                    <input type="hidden" name="login" value="1">
                    
                    <div class="space-y-2">
                        <label class="text-xs font-semibold text-gray-400 uppercase ml-1">Email Address</label>
                        <div class="relative group">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none transition-colors group-focus-within:text-indigo-400 text-gray-500">
                                <i class="fas fa-envelope"></i>
                            </div>
                            <input type="email" name="email" required class="block w-full pl-10 pr-3 py-3 bg-black/20 border border-gray-700 rounded-lg text-white placeholder-gray-600 focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all" placeholder="name@company.com">
                        </div>
                    </div>

                    <div class="space-y-2">
                        <label class="text-xs font-semibold text-gray-400 uppercase ml-1">Password</label>
                        <div class="relative group">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none transition-colors group-focus-within:text-indigo-400 text-gray-500">
                                <i class="fas fa-lock"></i>
                            </div>
                            <input type="password" name="password" required class="block w-full pl-10 pr-3 py-3 bg-black/20 border border-gray-700 rounded-lg text-white placeholder-gray-600 focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all" placeholder="••••••••">
                        </div>
                    </div>

                    <div class="flex items-center justify-between text-sm">
                        <label class="flex items-center text-gray-400 hover:text-gray-300 cursor-pointer">
                            <input type="checkbox" class="form-checkbox h-4 w-4 text-indigo-600 bg-gray-700 border-gray-600 rounded focus:ring-indigo-500 transition duration-150 ease-in-out">
                            <span class="ml-2">Remember me</span>
                        </label>
                        <a href="{{ url_for('forgot_password') }}" class="text-indigo-400 hover:text-indigo-300 font-medium transition-colors hover:underline">Forgot Password?</a>
                    </div>

                    <button type="submit" class="w-full py-3.5 px-4 bg-indigo-600 hover:bg-indigo-500 text-white font-bold rounded-lg shadow-lg shadow-indigo-600/20 transition-all transform hover:scale-[1.02] hover:shadow-indigo-600/40 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                        Sign In <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </form>
            </div>

            <div id="view-register" class="p-8 hidden transition-all duration-500 ease-in-out opacity-0 translate-x-10">
                <div class="text-center mb-6">
                    <h2 class="text-2xl font-bold text-white">Create Account</h2>
                    <p class="text-sm text-gray-400 mt-1">Join our community of developers and creators.</p>
                </div>

                <form method="POST" action="{{ url_for('login_register') }}" class="space-y-4">
                    <input type="hidden" name="register" value="1">
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div class="space-y-1">
                            <label class="text-xs font-semibold text-gray-400 uppercase ml-1">Username</label>
                            <input type="text" name="username" required class="block w-full px-3 py-2.5 bg-black/20 border border-gray-700 rounded-lg text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all" placeholder="jdoe">
                        </div>
                        <div class="space-y-1">
                            <label class="text-xs font-semibold text-gray-400 uppercase ml-1">Mobile</label>
                            <input type="tel" name="mobile_number" required class="block w-full px-3 py-2.5 bg-black/20 border border-gray-700 rounded-lg text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all" placeholder="123...">
                        </div>
                    </div>

                    <div class="space-y-1">
                        <label class="text-xs font-semibold text-gray-400 uppercase ml-1">Email Address</label>
                        <input type="email" name="email" required class="block w-full px-3 py-2.5 bg-black/20 border border-gray-700 rounded-lg text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all" placeholder="name@company.com">
                    </div>

                    <div class="space-y-1">
                        <label class="text-xs font-semibold text-gray-400 uppercase ml-1">Password</label>
                        <input type="password" name="password" required class="block w-full px-3 py-2.5 bg-black/20 border border-gray-700 rounded-lg text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all" placeholder="••••••••">
                    </div>

                    <div class="space-y-1">
                        <label class="text-xs font-semibold text-gray-400 uppercase ml-1">I am a...</label>
                        <div class="relative">
                            <select name="role" class="block w-full px-3 py-2.5 bg-black/20 border border-gray-700 rounded-lg text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent appearance-none transition-all cursor-pointer">
                                <option value="developer" class="bg-gray-800">Developer</option>
                                <option value="candidate" class="bg-gray-800">Candidate</option>
                                <option value="moderator" class="bg-gray-800">Moderator</option>
                            </select>
                            <div class="absolute inset-y-0 right-0 flex items-center px-3 pointer-events-none text-gray-400">
                                <i class="fas fa-chevron-down text-xs"></i>
                            </div>
                        </div>
                    </div>

                    <button type="submit" class="w-full py-3 px-4 bg-purple-600 hover:bg-purple-500 text-white font-bold rounded-lg shadow-lg shadow-purple-600/20 transition-all transform hover:scale-[1.02] hover:shadow-purple-600/40 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 mt-2">
                        Get Started <i class="fas fa-rocket ml-2"></i>
                    </button>
                </form>
                
                <p class="text-center text-xs text-gray-500 mt-4">
                    Account approval required by admin.
                </p>
            </div>

        </div>
    </div>
</div>

<script>
    function switchTab(tab) {
        const loginView = document.getElementById('view-login');
        const registerView = document.getElementById('view-register');
        const loginTab = document.getElementById('tab-login');
        const registerTab = document.getElementById('tab-register');
        const loginIndicator = document.getElementById('indicator-login');
        const registerIndicator = document.getElementById('indicator-register');

        if (tab === 'login') {
            // Hide Register
            registerView.classList.add('opacity-0', 'translate-x-10');
            setTimeout(() => {
                registerView.classList.add('hidden');
                // Show Login
                loginView.classList.remove('hidden');
                // Small delay to allow display block to apply before opacity transition
                requestAnimationFrame(() => {
                    loginView.classList.remove('opacity-0', '-translate-x-10');
                });
            }, 300);

            // Styling
            loginTab.classList.add('text-white', 'bg-white/5');
            loginTab.classList.remove('text-gray-400');
            registerTab.classList.add('text-gray-400');
            registerTab.classList.remove('text-white', 'bg-white/5');

            // Indicators
            loginIndicator.classList.replace('scale-x-0', 'scale-x-100');
            registerIndicator.classList.replace('scale-x-100', 'scale-x-0');

        } else {
            // Hide Login
            loginView.classList.add('opacity-0', '-translate-x-10');
            setTimeout(() => {
                loginView.classList.add('hidden');
                // Show Register
                registerView.classList.remove('hidden');
                requestAnimationFrame(() => {
                    registerView.classList.remove('opacity-0', 'translate-x-10');
                });
            }, 300);

            // Styling
            registerTab.classList.add('text-white', 'bg-white/5');
            registerTab.classList.remove('text-gray-400');
            loginTab.classList.add('text-gray-400');
            loginTab.classList.remove('text-white', 'bg-white/5');

            // Indicators
            registerIndicator.classList.replace('scale-x-0', 'scale-x-100');
            loginIndicator.classList.replace('scale-x-100', 'scale-x-0');
        }
    }
</script>
{% endblock %}